#include <stdio.h>
#define NO 0
#define YES 1
int main(void)
{
char buffer[1000], *inptr, *outptr, *wordptr;
int flag;
fgets(buffer, 999, stdin); // вводим строку с клавиатуры
inptr = buffer; // устанавливаем указатель начальной строки на начало массива
outptr = buffer; // устанавливаем указатель итоговой строки на начало массива
wordptr = buffer; // устанавливаем указатель начала слова на начало массива
flag = NO; // опускаем флаг слова
// цикл чтения символов из массива
// пока не достигнем конца строки
while (*inptr != '\0')
{
//если найден разделитель
if (*inptr == ' ' || *inptr == '.' || *inptr == ',' || *inptr == '\n')
{
//если это первый разделитель после слова
if (flag == YES)
//если первая и последняя буквы в слове не одинаковые
//надо перенести слово в итоговую строку
if (*wordptr != *(inptr - 1) && *wordptr != (*(inptr - 1) + ('A' –
'a')) && *wordptr != (*(inptr - 1) - ('A' - 'a')))
//цикл переноса слова в итоговую строку
//пока не дойдем до конца слова
while (wordptr < inptr)
*outptr++ = *wordptr++; //копируем в итоговую строку символ на
который указывает wordptr
flag = NO; //опускаем флаг слова
*outptr++ = *inptr; //копируем в итоговую строку текущий разделитель
}
//если найден не разделитель
else
{
//если предыдущий символ был разделителем
if (flag == NO)
wordptr = inptr; //запоминаем адрес начала слова
flag = YES; //поднимаем флаг слова
}
inptr++; //переходим к следующему символу массива
}
*outptr = '\0'; //добавляем в конечную строку символ конца строки
fputs(buffer, stdout); //выводим строку в консоль
getchar();
return 0;
}
